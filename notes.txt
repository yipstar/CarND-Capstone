In waypoint_loader/launch/waypoint_loader.launch, I added a new parameter: name="yaw_is_in_degrees" value="true".  Then in waypoint_loader.py, I put the line: self.yaw_is_in_degrees = rospy.get_param('~yaw_is_in_degrees', False)   . What this does is checks for the parameter, and if it is present, uses it.  If the parameter is not set in the launch file, then its defaults to false.  So in theory, self.yaw_is_in_degrees should be true for the simulator track, and false for the real track.  Later in waypoint_loader.py, the actual loader checks this value to decide whether to do the conversion or not.  By the way, you can use the builtin python function math.radians() to do the conversion; you don't need to write your own formula with pi and 180.

Carlos Galvez [12:29 AM]
Anyone got the YawController working with `steer_ratio=2.67`? After changing it to 14.8 (like in Carla) it works like a charm.

James Jackson [6:25 PM] 
@anthony-s Thanks ! Here are my training and validation TFRecords if anyone wants to play with them. I used RectLabel on Mac to annotate in PASCAL VOC format, and created a script to process them into TFRecords. There are 187 files in total, 70% used for training, 30% used for validation. Note that there is only a single label (traffic light). Finding the color is a separate task. https://drive.google.com/drive/folders/0B_SXDGKPsMsfSXJzUzhIV3ZQNUU?usp=sharing

Did anyone experience car go off the road at approximately waypoints from 6000?


7 replies
Anoop Ramakrishna [12 hours ago] 
I think there is something in the simulator, where after 6000 points it starts asking for more system resources, I was facing issues around 6000, when I started running the simulator on another PC this problem went away.


yusun Liu [11 hours ago] 
Thanks for your feedback. If resource is issue,  I even did not start the TL_Detector yet.


Faraz Khan [6 hours ago] 
@etendue Mine would go completely stupid around 5000 and the problem was that I was comparing car heading to way point heading directly and thats not correct. Theres a time when the car switches from 3rads to -3rads and even though both those angles are equal you need to calculate the diff correctly


yusun Liu [1 hour ago] 
Hi @faraz that could be the case, somehow I am comparing the car heading and waypoint heading to get next waypoint.  I don't know why that is not correct.


Faraz Khan [1 hour ago] 
@etendue mine seems to randomly go astray around 6700 as well ive noticed. Its random though


Faraz Khan [1 hour ago] 
So it doesn't sometime, but whenever it does its around that mark :thinking_face:


Faraz Khan [28 minutes ago] 
@etendue this helped: https://gamedev.stackexchange.com/questions/4467/comparing-angles-and-working-out-the-difference
gamedev.stackexchange.com
Comparing angles and working out the difference
I want to compare angles and get an idea of the distance between them. For this application, I'm working in degrees, but it would also work for radians and grads. The problem with angles is that they

TODO:

https://github.com/udacity/CarND-Capstone/issues/31

Stephen Welch [2 days ago]
Brake should be given in torque. The correct amount of torque can be computed using the desired acceleration, the weight of the vehicle, and the wheel radius.


Stephen Welch [2 days ago] 
I'll update the project instructions to make this clear.


rosmsg info geometry_msgs/PoseStamped
std_msgs/Header header
  uint32 seq
  time stamp
  string frame_id
geometry_msgs/Pose pose
  geometry_msgs/Point position
    float64 x
    float64 y
    float64 z
  geometry_msgs/Quaternion orientation
    float64 x
    float64 y
    float64 z
    float64 w

Initial Pos:
---
header: 
  seq: 462
  stamp: 
    secs: 1503705765
    nsecs: 449620008
  frame_id: world
pose: 
  position: 
    x: 1131.22
    y: 1183.27
    z: 0.1069651
  orientation: 
    x: 0.0
    y: 0.0
    z: 0.0436201197059
    w: 0.999048189607

Example Waypoint:
  - 
    pose: 
      header: 
        seq: 0
        stamp: 
          secs: 0
          nsecs:         0
        frame_id: ''
      pose: 
        position: 
          x: 889.6
          y: 1128.83
          z: 0.0
        orientation: 
          x: 0.0
          y: 0.0
          z: 0.0
          w: 1.0
    twist: 
      header: 
        seq: 0
        stamp: 
          secs: 0
          nsecs:         0
        frame_id: ''
      twist: 
        linear: 
          x: 11.1112
          y: 0.0
          z: 0.0
        angular: 
          x: 0.0
          y: 0.0
          z: 0.0

rosmsg info Lane
[styx_msgs/Lane]:
std_msgs/Header header
  uint32 seq
  time stamp
  string frame_id
styx_msgs/Waypoint[] waypoints
  geometry_msgs/PoseStamped pose
    std_msgs/Header header
      uint32 seq
      time stamp
      string frame_id
    geometry_msgs/Pose pose
      geometry_msgs/Point position
        float64 x
        float64 y
        float64 z
      geometry_msgs/Quaternion orientation
        float64 x
        float64 y
        float64 z
        float64 w
  geometry_msgs/TwistStamped twist
    std_msgs/Header header
      uint32 seq
      time stamp
      string frame_id
    geometry_msgs/Twist twist
      geometry_msgs/Vector3 linear
        float64 x
        float64 y
        float64 z
      geometry_msgs/Vector3 angular
        float64 x
        float64 y
        float64 z

rosmsg info geometry_msgs/TwistStamped
std_msgs/Header header
  uint32 seq
  time stamp
  string frame_id
geometry_msgs/Twist twist
  geometry_msgs/Vector3 linear
    float64 x
    float64 y
    float64 z
  geometry_msgs/Vector3 angular
    float64 x
    float64 y
    float64 z

rosmsg info styx_msgs/TrafficLightArray
std_msgs/Header header
  uint32 seq
  time stamp
  string frame_id
styx_msgs/TrafficLight[] lights
  uint8 UNKNOWN=4
  uint8 GREEN=2
  uint8 YELLOW=1
  uint8 RED=0
  std_msgs/Header header
    uint32 seq
    time stamp
    string frame_id
  geometry_msgs/PoseStamped pose
    std_msgs/Header header
      uint32 seq
      time stamp
      string frame_id
    geometry_msgs/Pose pose
      geometry_msgs/Point position
        float64 x
        float64 y
        float64 z
      geometry_msgs/Quaternion orientation
        float64 x
        float64 y
        float64 z
        float64 w
  uint8 state


